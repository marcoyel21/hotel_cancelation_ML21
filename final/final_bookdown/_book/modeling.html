<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capitulo 4 Modeling | Proyecto Final: Hotel Cancelation</title>
  <meta name="description" content="Este es el reporte final del proyecto final sobre el concurso de Kaggle de predicción de cancelación en hoteles." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Capitulo 4 Modeling | Proyecto Final: Hotel Cancelation" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Este es el reporte final del proyecto final sobre el concurso de Kaggle de predicción de cancelación en hoteles." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capitulo 4 Modeling | Proyecto Final: Hotel Cancelation" />
  
  <meta name="twitter:description" content="Este es el reporte final del proyecto final sobre el concurso de Kaggle de predicción de cancelación en hoteles." />
  

<meta name="author" content="Alex Joel Marco" />


<meta name="date" content="2021-12-05" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="preparación-de-los-datos.html"/>
<link rel="next" href="conclusiones.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introducción</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#proyecto"><i class="fa fa-check"></i><b>1.1</b> Proyecto</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#descripción-del-problema"><i class="fa fa-check"></i><b>1.2</b> Descripción del problema</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#objetivo"><i class="fa fa-check"></i><b>1.3</b> Objetivo</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#fuente-de-datos"><i class="fa fa-check"></i><b>1.4</b> Fuente de datos</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#ambiente"><i class="fa fa-check"></i><b>1.5</b> Ambiente</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="analisis-exploratorio-de-datos.html"><a href="analisis-exploratorio-de-datos.html"><i class="fa fa-check"></i><b>2</b> Analisis Exploratorio de Datos</a>
<ul>
<li class="chapter" data-level="2.0.1" data-path="analisis-exploratorio-de-datos.html"><a href="analisis-exploratorio-de-datos.html#cancelaciones-eda"><i class="fa fa-check"></i><b>2.0.1</b> Cancelaciones EDA</a></li>
<li class="chapter" data-level="2.0.2" data-path="analisis-exploratorio-de-datos.html"><a href="analisis-exploratorio-de-datos.html#análisis-de-tendenciás-en-el-tiempo-eda"><i class="fa fa-check"></i><b>2.0.2</b> Análisis de tendenciás en el tiempo EDA</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="preparación-de-los-datos.html"><a href="preparación-de-los-datos.html"><i class="fa fa-check"></i><b>3</b> Preparación de los Datos</a>
<ul>
<li class="chapter" data-level="3.0.1" data-path="preparación-de-los-datos.html"><a href="preparación-de-los-datos.html#preprocesamiento"><i class="fa fa-check"></i><b>3.0.1</b> Preprocesamiento</a></li>
<li class="chapter" data-level="3.0.2" data-path="preparación-de-los-datos.html"><a href="preparación-de-los-datos.html#ingeniería-de-caracterísitcas"><i class="fa fa-check"></i><b>3.0.2</b> Ingeniería de caracterísitcas</a></li>
<li class="chapter" data-level="3.1" data-path="preparación-de-los-datos.html"><a href="preparación-de-los-datos.html#cv"><i class="fa fa-check"></i><b>3.1</b> CV</a></li>
<li class="chapter" data-level="3.2" data-path="preparación-de-los-datos.html"><a href="preparación-de-los-datos.html#nivelación-de-variables"><i class="fa fa-check"></i><b>3.2</b> Nivelación de variables</a></li>
<li class="chapter" data-level="3.3" data-path="preparación-de-los-datos.html"><a href="preparación-de-los-datos.html#matrices-ralas"><i class="fa fa-check"></i><b>3.3</b> Matrices RALAS</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="modeling.html"><a href="modeling.html"><i class="fa fa-check"></i><b>4</b> Modeling</a>
<ul>
<li class="chapter" data-level="4.1" data-path="modeling.html"><a href="modeling.html#cross-validated-lasso-logit"><i class="fa fa-check"></i><b>4.1</b> Cross-Validated LASSO-logit</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="modeling.html"><a href="modeling.html#grafica-lasso-de-los-coeficientes-vs-la-complejidad-del-modelo."><i class="fa fa-check"></i><b>4.1.1</b> Grafica Lasso de los coeficientes vs la complejidad del modelo.</a></li>
<li class="chapter" data-level="4.1.2" data-path="modeling.html"><a href="modeling.html#hiper-parametro"><i class="fa fa-check"></i><b>4.1.2</b> Hiper parametro</a></li>
<li class="chapter" data-level="4.1.3" data-path="modeling.html"><a href="modeling.html#variables"><i class="fa fa-check"></i><b>4.1.3</b> Variables</a></li>
<li class="chapter" data-level="4.1.4" data-path="modeling.html"><a href="modeling.html#log-loss-test-oos"><i class="fa fa-check"></i><b>4.1.4</b> LOG LOSS test OOS</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="modeling.html"><a href="modeling.html#xgboosting"><i class="fa fa-check"></i><b>4.2</b> XGBOOSTING</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="conclusiones.html"><a href="conclusiones.html"><i class="fa fa-check"></i><b>5</b> Conclusiones</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Proyecto Final: Hotel Cancelation</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="modeling" class="section level1" number="4">
<h1><span class="header-section-number">Capitulo 4</span> Modeling</h1>
<p>En esta parte aplicaremos dos modelos: un Lasso-Logit y un XGboosting.</p>
<div id="cross-validated-lasso-logit" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Cross-Validated LASSO-logit</h2>
<p>Seestima un cross validated LASSO y se muestra el la gráfica de CV Binomial Deviance vs Complejidad</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="modeling.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#CV LASSO</span></span>
<span id="cb7-2"><a href="modeling.html#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"># se hacen 5 folds </span></span>
<span id="cb7-3"><a href="modeling.html#cb7-3" aria-hidden="true" tabindex="-1"></a>cvlasso_a<span class="ot">&lt;-</span><span class="fu">cv.gamlr</span>(<span class="at">x =</span> Xa, <span class="at">y =</span> Ya, <span class="at">verb =</span> T, <span class="at">family =</span> <span class="st">&#39;binomial&#39;</span>, <span class="at">nfold =</span> <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## Warning in gamlr(x, y, ...): numerically perfect fit for some observations.</code></pre>
<pre><code>## fold 1,2,3,4,5,done.</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="modeling.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Grafica</span></span>
<span id="cb10-2"><a href="modeling.html#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(cvlasso_a)</span></code></pre></div>
<p><img src="final_bookdown_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<div id="grafica-lasso-de-los-coeficientes-vs-la-complejidad-del-modelo." class="section level3" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> Grafica Lasso de los coeficientes vs la complejidad del modelo.</h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="modeling.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(cvlasso_a<span class="sc">$</span>gamlr)</span></code></pre></div>
<p><img src="final_bookdown_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
</div>
<div id="hiper-parametro" class="section level3" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> Hiper parametro</h3>
<p>Automaticamente se elige el lambda que minimiza la devianza OOS.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="modeling.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Identificador para el lambda deseado</span></span>
<span id="cb12-2"><a href="modeling.html#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Valor del lambda deseado</span></span>
<span id="cb12-3"><a href="modeling.html#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co">#lambda resultante</span></span>
<span id="cb12-4"><a href="modeling.html#cb12-4" aria-hidden="true" tabindex="-1"></a>a_lambda<span class="ot">&lt;-</span> <span class="fu">colnames</span>(<span class="fu">coef</span>(cvlasso_a, <span class="at">select=</span><span class="st">&quot;min&quot;</span>))</span>
<span id="cb12-5"><a href="modeling.html#cb12-5" aria-hidden="true" tabindex="-1"></a>cvlasso_a<span class="sc">$</span>gamlr<span class="sc">$</span>lambda[a_lambda]</span></code></pre></div>
<pre><code>##     seg100 
## 0.00243361</code></pre>
</div>
<div id="variables" class="section level3" number="4.1.3">
<h3><span class="header-section-number">4.1.3</span> Variables</h3>
<p>A continuacion una tabla con los coeficientes que se selecciona para el CV LASSO. Que sorprendentemente solo fueron 561.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="modeling.html#cb14-1" aria-hidden="true" tabindex="-1"></a>coefs<span class="ot">&lt;-</span><span class="fu">coef</span>(cvlasso_a, <span class="at">select=</span><span class="st">&quot;min&quot;</span>, <span class="at">k=</span><span class="dv">2</span>, <span class="at">corrected=</span><span class="cn">TRUE</span>)</span>
<span id="cb14-2"><a href="modeling.html#cb14-2" aria-hidden="true" tabindex="-1"></a>coefs<span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(coefs[,<span class="dv">1</span>])</span>
<span id="cb14-3"><a href="modeling.html#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(coefs)<span class="ot">&lt;-</span><span class="st">&quot;valor&quot;</span></span>
<span id="cb14-4"><a href="modeling.html#cb14-4" aria-hidden="true" tabindex="-1"></a>coefs<span class="ot">&lt;-</span>coefs <span class="sc">%&gt;%</span> <span class="fu">filter</span>(valor <span class="sc">!=</span><span class="dv">0</span>)</span>
<span id="cb14-5"><a href="modeling.html#cb14-5" aria-hidden="true" tabindex="-1"></a>modelvariables<span class="ot">&lt;-</span><span class="fu">row.names</span>(coefs)</span>
<span id="cb14-6"><a href="modeling.html#cb14-6" aria-hidden="true" tabindex="-1"></a>modelvariables</span></code></pre></div>
<pre><code>##   [1] &quot;intercept&quot;                     &quot;lead_time&quot;                    
##   [3] &quot;arrival_date_year2015&quot;         &quot;arrival_date_year2017&quot;        
##   [5] &quot;arrival_date_monthDecember&quot;    &quot;arrival_date_monthJune&quot;       
##   [7] &quot;arrival_date_week_number9&quot;     &quot;arrival_date_week_number19&quot;   
##   [9] &quot;arrival_date_day_of_month22&quot;   &quot;stays_in_weekend_nights&quot;      
##  [11] &quot;stays_in_week_nights&quot;          &quot;adults&quot;                       
##  [13] &quot;mealHB&quot;                        &quot;mealUndefined&quot;                
##  [15] &quot;countryAGO&quot;                    &quot;countryARE&quot;                   
##  [17] &quot;countryAUT&quot;                    &quot;countryBEL&quot;                   
##  [19] &quot;countryBGD&quot;                    &quot;countryBRA&quot;                   
##  [21] &quot;countryCHN&quot;                    &quot;countryCPV&quot;                   
##  [23] &quot;countryCYP&quot;                    &quot;countryDEU&quot;                   
##  [25] &quot;countryESP&quot;                    &quot;countryFIN&quot;                   
##  [27] &quot;countryFRA&quot;                    &quot;countryGAB&quot;                   
##  [29] &quot;countryGBR&quot;                    &quot;countryGEO&quot;                   
##  [31] &quot;countryGLP&quot;                    &quot;countryHKG&quot;                   
##  [33] &quot;countryHND&quot;                    &quot;countryIDN&quot;                   
##  [35] &quot;countryIRL&quot;                    &quot;countryITA&quot;                   
##  [37] &quot;countryJEY&quot;                    &quot;countryJPN&quot;                   
##  [39] &quot;countryKOR&quot;                    &quot;countryMAC&quot;                   
##  [41] &quot;countryMAR&quot;                    &quot;countryMDV&quot;                   
##  [43] &quot;countryNGA&quot;                    &quot;countryNLD&quot;                   
##  [45] &quot;countryNOR&quot;                    &quot;countryPAK&quot;                   
##  [47] &quot;countryPAN&quot;                    &quot;countryPOL&quot;                   
##  [49] &quot;countryPRT&quot;                    &quot;countryQAT&quot;                   
##  [51] &quot;countryRUS&quot;                    &quot;countrySAU&quot;                   
##  [53] &quot;countrySEN&quot;                    &quot;countrySRB&quot;                   
##  [55] &quot;countrySWE&quot;                    &quot;countryTJK&quot;                   
##  [57] &quot;countryTUR&quot;                    &quot;countryZAF&quot;                   
##  [59] &quot;market_segment8&quot;               &quot;distribution_channel5&quot;        
##  [61] &quot;is_repeated_guest&quot;             &quot;reserved_room_typeE&quot;          
##  [63] &quot;reserved_room_typeP&quot;           &quot;assigned_room_typeB&quot;          
##  [65] &quot;assigned_room_typeI&quot;           &quot;assigned_room_typeP&quot;          
##  [67] &quot;booking_changes&quot;               &quot;deposit_typeB&quot;                
##  [69] &quot;agent10&quot;                       &quot;agent107&quot;                     
##  [71] &quot;agent11&quot;                       &quot;agent110&quot;                     
##  [73] &quot;agent118&quot;                      &quot;agent13&quot;                      
##  [75] &quot;agent132&quot;                      &quot;agent134&quot;                     
##  [77] &quot;agent14&quot;                       &quot;agent151&quot;                     
##  [79] &quot;agent152&quot;                      &quot;agent155&quot;                     
##  [81] &quot;agent157&quot;                      &quot;agent16&quot;                      
##  [83] &quot;agent168&quot;                      &quot;agent17&quot;                      
##  [85] &quot;agent191&quot;                      &quot;agent214&quot;                     
##  [87] &quot;agent215&quot;                      &quot;agent22&quot;                      
##  [89] &quot;agent220&quot;                      &quot;agent23&quot;                      
##  [91] &quot;agent234&quot;                      &quot;agent240&quot;                     
##  [93] &quot;agent241&quot;                      &quot;agent242&quot;                     
##  [95] &quot;agent243&quot;                      &quot;agent251&quot;                     
##  [97] &quot;agent26&quot;                       &quot;agent262&quot;                     
##  [99] &quot;agent27&quot;                       &quot;agent281&quot;                     
## [101] &quot;agent288&quot;                      &quot;agent291&quot;                     
## [103] &quot;agent308&quot;                      &quot;agent314&quot;                     
## [105] &quot;agent315&quot;                      &quot;agent32&quot;                      
## [107] &quot;agent332&quot;                      &quot;agent341&quot;                     
## [109] &quot;agent359&quot;                      &quot;agent38&quot;                      
## [111] &quot;agent390&quot;                      &quot;agent40&quot;                      
## [113] &quot;agent410&quot;                      &quot;agent440&quot;                     
## [115] &quot;agent56&quot;                       &quot;agent6&quot;                       
## [117] &quot;agent63&quot;                       &quot;agent7&quot;                       
## [119] &quot;agent75&quot;                       &quot;agent8&quot;                       
## [121] &quot;agent86&quot;                       &quot;agent89&quot;                      
## [123] &quot;agent9&quot;                        &quot;agent94&quot;                      
## [125] &quot;company102&quot;                    &quot;company110&quot;                   
## [127] &quot;company112&quot;                    &quot;company153&quot;                   
## [129] &quot;company154&quot;                    &quot;company204&quot;                   
## [131] &quot;company218&quot;                    &quot;company242&quot;                   
## [133] &quot;company253&quot;                    &quot;company270&quot;                   
## [135] &quot;company277&quot;                    &quot;company309&quot;                   
## [137] &quot;company316&quot;                    &quot;company321&quot;                   
## [139] &quot;company350&quot;                    &quot;company38&quot;                    
## [141] &quot;company39&quot;                     &quot;company392&quot;                   
## [143] &quot;company40&quot;                     &quot;company405&quot;                   
## [145] &quot;company410&quot;                    &quot;company416&quot;                   
## [147] &quot;company461&quot;                    &quot;company470&quot;                   
## [149] &quot;company478&quot;                    &quot;company504&quot;                   
## [151] &quot;company51&quot;                     &quot;company68&quot;                    
## [153] &quot;company72&quot;                     &quot;company77&quot;                    
## [155] &quot;companyNULL&quot;                   &quot;customer_typeTransient&quot;       
## [157] &quot;adr&quot;                           &quot;required_car_parking_spaces&quot;  
## [159] &quot;total_of_special_requests&quot;     &quot;dia_semmiercoles&quot;             
## [161] &quot;dia_semviernes&quot;                &quot;pascua_m1&quot;                    
## [163] &quot;agent_company107_NULL&quot;         &quot;agent_company11_NULL&quot;         
## [165] &quot;agent_company110_NULL&quot;         &quot;agent_company118_NULL&quot;        
## [167] &quot;agent_company13_NULL&quot;          &quot;agent_company134_NULL&quot;        
## [169] &quot;agent_company151_NULL&quot;         &quot;agent_company152_NULL&quot;        
## [171] &quot;agent_company155_NULL&quot;         &quot;agent_company17_NULL&quot;         
## [173] &quot;agent_company191_NULL&quot;         &quot;agent_company21_NULL&quot;         
## [175] &quot;agent_company214_NULL&quot;         &quot;agent_company234_NULL&quot;        
## [177] &quot;agent_company240_NULL&quot;         &quot;agent_company242_NULL&quot;        
## [179] &quot;agent_company262_NULL&quot;         &quot;agent_company281_NULL&quot;        
## [181] &quot;agent_company291_NULL&quot;         &quot;agent_company314_NULL&quot;        
## [183] &quot;agent_company315_NULL&quot;         &quot;agent_company32_NULL&quot;         
## [185] &quot;agent_company332_NULL&quot;         &quot;agent_company341_NULL&quot;        
## [187] &quot;agent_company38_NULL&quot;          &quot;agent_company390_NULL&quot;        
## [189] &quot;agent_company410_NULL&quot;         &quot;agent_company440_NULL&quot;        
## [191] &quot;agent_company56_NULL&quot;          &quot;agent_company8_NULL&quot;          
## [193] &quot;agent_company86_NULL&quot;          &quot;agent_company9_NULL&quot;          
## [195] &quot;agent_company94_NULL&quot;          &quot;agent_companyNULL_102&quot;        
## [197] &quot;agent_companyNULL_110&quot;         &quot;agent_companyNULL_112&quot;        
## [199] &quot;agent_companyNULL_153&quot;         &quot;agent_companyNULL_204&quot;        
## [201] &quot;agent_companyNULL_218&quot;         &quot;agent_companyNULL_253&quot;        
## [203] &quot;agent_companyNULL_270&quot;         &quot;agent_companyNULL_277&quot;        
## [205] &quot;agent_companyNULL_281&quot;         &quot;agent_companyNULL_309&quot;        
## [207] &quot;agent_companyNULL_316&quot;         &quot;agent_companyNULL_321&quot;        
## [209] &quot;agent_companyNULL_350&quot;         &quot;agent_companyNULL_38&quot;         
## [211] &quot;agent_companyNULL_392&quot;         &quot;agent_companyNULL_416&quot;        
## [213] &quot;agent_companyNULL_461&quot;         &quot;agent_companyNULL_470&quot;        
## [215] &quot;agent_companyNULL_478&quot;         &quot;agent_companyNULL_68&quot;         
## [217] &quot;agent_companyNULL_77&quot;          &quot;singles_adults&quot;               
## [219] &quot;dif_room&quot;                      &quot;weekmonthFebruary_9&quot;          
## [221] &quot;weekmonthJune_27&quot;              &quot;weekmonthMay_19&quot;              
## [223] &quot;weekmonthNovember_49&quot;          &quot;weekmonthSeptember_40&quot;        
## [225] &quot;daymontApril_4&quot;                &quot;daymontApril_5&quot;               
## [227] &quot;daymontApril_6&quot;                &quot;daymontAugust_18&quot;             
## [229] &quot;daymontDecember_16&quot;            &quot;daymontDecember_18&quot;           
## [231] &quot;daymontDecember_3&quot;             &quot;daymontDecember_5&quot;            
## [233] &quot;daymontDecember_6&quot;             &quot;daymontFebruary_8&quot;            
## [235] &quot;daymontJuly_1&quot;                 &quot;daymontJuly_10&quot;               
## [237] &quot;daymontJuly_15&quot;                &quot;daymontJuly_16&quot;               
## [239] &quot;daymontJuly_17&quot;                &quot;daymontJuly_2&quot;                
## [241] &quot;daymontJuly_23&quot;                &quot;daymontJuly_27&quot;               
## [243] &quot;daymontJuly_29&quot;                &quot;daymontJuly_5&quot;                
## [245] &quot;daymontJuly_7&quot;                 &quot;daymontJune_10&quot;               
## [247] &quot;daymontJune_21&quot;                &quot;daymontJune_26&quot;               
## [249] &quot;daymontJune_8&quot;                 &quot;daymontMarch_29&quot;              
## [251] &quot;daymontMay_15&quot;                 &quot;daymontMay_25&quot;                
## [253] &quot;daymontMay_26&quot;                 &quot;daymontMay_27&quot;                
## [255] &quot;daymontNovember_12&quot;            &quot;daymontNovember_23&quot;           
## [257] &quot;daymontNovember_28&quot;            &quot;daymontOctober_12&quot;            
## [259] &quot;daymontOctober_13&quot;             &quot;daymontOctober_14&quot;            
## [261] &quot;daymontOctober_22&quot;             &quot;daymontOctober_25&quot;            
## [263] &quot;daymontOctober_26&quot;             &quot;daymontOctober_27&quot;            
## [265] &quot;daymontOctober_8&quot;              &quot;weekdaymonthApril_15_4&quot;       
## [267] &quot;weekdaymonthApril_15_5&quot;        &quot;weekdaymonthApril_15_6&quot;       
## [269] &quot;weekdaymonthAugust_33_14&quot;      &quot;weekdaymonthAugust_34_18&quot;     
## [271] &quot;weekdaymonthAugust_35_29&quot;      &quot;weekdaymonthDecember_49_3&quot;    
## [273] &quot;weekdaymonthDecember_49_5&quot;     &quot;weekdaymonthDecember_50_6&quot;    
## [275] &quot;weekdaymonthDecember_51_16&quot;    &quot;weekdaymonthDecember_53_26&quot;   
## [277] &quot;weekdaymonthFebruary_10_28&quot;    &quot;weekdaymonthFebruary_8_24&quot;    
## [279] &quot;weekdaymonthJanuary_1_6&quot;       &quot;weekdaymonthJanuary_2_6&quot;      
## [281] &quot;weekdaymonthJuly_27_1&quot;         &quot;weekdaymonthJuly_27_2&quot;        
## [283] &quot;weekdaymonthJuly_27_3&quot;         &quot;weekdaymonthJuly_28_11&quot;       
## [285] &quot;weekdaymonthJuly_28_5&quot;         &quot;weekdaymonthJuly_28_7&quot;        
## [287] &quot;weekdaymonthJuly_29_15&quot;        &quot;weekdaymonthJuly_29_16&quot;       
## [289] &quot;weekdaymonthJuly_30_23&quot;        &quot;weekdaymonthJuly_31_27&quot;       
## [291] &quot;weekdaymonthJuly_31_29&quot;        &quot;weekdaymonthJune_24_10&quot;       
## [293] &quot;weekdaymonthJune_24_8&quot;         &quot;weekdaymonthJune_26_21&quot;       
## [295] &quot;weekdaymonthJune_27_26&quot;        &quot;weekdaymonthMarch_11_10&quot;      
## [297] &quot;weekdaymonthMarch_11_14&quot;       &quot;weekdaymonthMarch_9_1&quot;        
## [299] &quot;weekdaymonthMay_21_15&quot;         &quot;weekdaymonthMay_22_25&quot;        
## [301] &quot;weekdaymonthMay_22_26&quot;         &quot;weekdaymonthMay_22_27&quot;        
## [303] &quot;weekdaymonthNovember_46_12&quot;    &quot;weekdaymonthNovember_48_20&quot;   
## [305] &quot;weekdaymonthNovember_48_23&quot;    &quot;weekdaymonthNovember_48_27&quot;   
## [307] &quot;weekdaymonthNovember_49_27&quot;    &quot;weekdaymonthNovember_49_28&quot;   
## [309] &quot;weekdaymonthOctober_40_2&quot;      &quot;weekdaymonthOctober_41_8&quot;     
## [311] &quot;weekdaymonthOctober_41_9&quot;      &quot;weekdaymonthOctober_42_12&quot;    
## [313] &quot;weekdaymonthOctober_42_13&quot;     &quot;weekdaymonthOctober_42_14&quot;    
## [315] &quot;weekdaymonthOctober_42_17&quot;     &quot;weekdaymonthOctober_42_9&quot;     
## [317] &quot;weekdaymonthOctober_43_17&quot;     &quot;weekdaymonthOctober_43_22&quot;    
## [319] &quot;weekdaymonthOctober_43_23&quot;     &quot;weekdaymonthOctober_44_25&quot;    
## [321] &quot;weekdaymonthOctober_44_26&quot;     &quot;weekdaymonthOctober_44_27&quot;    
## [323] &quot;weekdaymonthSeptember_36_5&quot;    &quot;weekdaymonthSeptember_37_4&quot;   
## [325] &quot;month_diasemApril_lunes&quot;       &quot;month_diasemDecember_lunes&quot;   
## [327] &quot;month_diasemDecember_viernes&quot;  &quot;month_diasemFebruary_sabado&quot;  
## [329] &quot;month_diasemJuly_miercoles&quot;    &quot;month_diasemMarch_domingo&quot;    
## [331] &quot;month_diasemMay_jueves&quot;        &quot;month_diasemOctober_sabado&quot;   
## [333] &quot;week_diasem1_sabado&quot;           &quot;week_diasem12_lunes&quot;          
## [335] &quot;week_diasem15_lunes&quot;           &quot;week_diasem15_martes&quot;         
## [337] &quot;week_diasem15_miercoles&quot;       &quot;week_diasem21_domingo&quot;        
## [339] &quot;week_diasem22_jueves&quot;          &quot;week_diasem22_miercoles&quot;      
## [341] &quot;week_diasem22_viernes&quot;         &quot;week_diasem24_miercoles&quot;      
## [343] &quot;week_diasem24_viernes&quot;         &quot;week_diasem26_martes&quot;         
## [345] &quot;week_diasem27_domingo&quot;         &quot;week_diasem27_miercoles&quot;      
## [347] &quot;week_diasem28_sabado&quot;          &quot;week_diasem29_sabado&quot;         
## [349] &quot;week_diasem29_viernes&quot;         &quot;week_diasem31_lunes&quot;          
## [351] &quot;week_diasem31_viernes&quot;         &quot;week_diasem33_sabado&quot;         
## [353] &quot;week_diasem36_jueves&quot;          &quot;week_diasem37_jueves&quot;         
## [355] &quot;week_diasem38_martes&quot;          &quot;week_diasem39_sabado&quot;         
## [357] &quot;week_diasem40_sabado&quot;          &quot;week_diasem41_martes&quot;         
## [359] &quot;week_diasem44_domingo&quot;         &quot;week_diasem45_sabado&quot;         
## [361] &quot;week_diasem47_miercoles&quot;       &quot;week_diasem48_viernes&quot;        
## [363] &quot;week_diasem49_viernes&quot;         &quot;week_diasem5_sabado&quot;          
## [365] &quot;week_diasem5_viernes&quot;          &quot;week_diasem51_viernes&quot;        
## [367] &quot;tasa_canc&quot;                     &quot;market_dist3_TA_TO&quot;           
## [369] &quot;market_dist8_5&quot;                &quot;market_distOfflineTA_TO_TA_TO&quot;
## [371] &quot;cust_depostiTransient_B&quot;       &quot;cust_segmentContract_7&quot;       
## [373] &quot;cust_segmentTransient-Party_7&quot; &quot;cust_segmentTransient_7&quot;      
## [375] &quot;lead_depositA_[ 16, 59)&quot;       &quot;lead_depositA_[ 59,146)&quot;      
## [377] &quot;lead_depositA_[146,737]&quot;       &quot;lead_depositB_[ 59,146)&quot;      
## [379] &quot;lead_week1_[ 59,146)&quot;          &quot;lead_week1_[146,737]&quot;         
## [381] &quot;lead_week10_[146,737]&quot;         &quot;lead_week12_[ 59,146)&quot;        
## [383] &quot;lead_week15_[ 16, 59)&quot;         &quot;lead_week17_[146,737]&quot;        
## [385] &quot;lead_week18_[ 59,146)&quot;         &quot;lead_week2_[  0, 16)&quot;         
## [387] &quot;lead_week2_[ 16, 59)&quot;          &quot;lead_week2_[ 59,146)&quot;         
## [389] &quot;lead_week2_[146,737]&quot;          &quot;lead_week21_[  0, 16)&quot;        
## [391] &quot;lead_week22_[ 59,146)&quot;         &quot;lead_week22_[146,737]&quot;        
## [393] &quot;lead_week24_[ 16, 59)&quot;         &quot;lead_week24_[ 59,146)&quot;        
## [395] &quot;lead_week29_[146,737]&quot;         &quot;lead_week3_[  0, 16)&quot;         
## [397] &quot;lead_week3_[ 59,146)&quot;          &quot;lead_week3_[146,737]&quot;         
## [399] &quot;lead_week31_[ 16, 59)&quot;         &quot;lead_week32_[  0, 16)&quot;        
## [401] &quot;lead_week32_[ 16, 59)&quot;         &quot;lead_week32_[ 59,146)&quot;        
## [403] &quot;lead_week34_[146,737]&quot;         &quot;lead_week35_[ 16, 59)&quot;        
## [405] &quot;lead_week37_[ 59,146)&quot;         &quot;lead_week39_[ 59,146)&quot;        
## [407] &quot;lead_week4_[146,737]&quot;          &quot;lead_week40_[ 59,146)&quot;        
## [409] &quot;lead_week42_[  0, 16)&quot;         &quot;lead_week42_[ 16, 59)&quot;        
## [411] &quot;lead_week42_[ 59,146)&quot;         &quot;lead_week43_[ 59,146)&quot;        
## [413] &quot;lead_week44_[  0, 16)&quot;         &quot;lead_week44_[ 59,146)&quot;        
## [415] &quot;lead_week44_[146,737]&quot;         &quot;lead_week45_[ 16, 59)&quot;        
## [417] &quot;lead_week45_[ 59,146)&quot;         &quot;lead_week48_[  0, 16)&quot;        
## [419] &quot;lead_week48_[ 59,146)&quot;         &quot;lead_week49_[ 59,146)&quot;        
## [421] &quot;lead_week49_[146,737]&quot;         &quot;lead_week5_[  0, 16)&quot;         
## [423] &quot;lead_week5_[ 59,146)&quot;          &quot;lead_week50_[  0, 16)&quot;        
## [425] &quot;lead_week50_[ 16, 59)&quot;         &quot;lead_week50_[ 59,146)&quot;        
## [427] &quot;lead_week51_[146,737]&quot;         &quot;lead_week52_[ 59,146)&quot;        
## [429] &quot;lead_week52_[146,737]&quot;         &quot;lead_week53_[146,737]&quot;        
## [431] &quot;lead_week6_[  0, 16)&quot;          &quot;lead_week6_[ 59,146)&quot;         
## [433] &quot;lead_week6_[146,737]&quot;          &quot;lead_week8_[  0, 16)&quot;         
## [435] &quot;lead_week8_[146,737]&quot;          &quot;lead_week9_[  0, 16)&quot;         
## [437] &quot;meal_reservFB_A&quot;               &quot;meal_reservHB_G&quot;              
## [439] &quot;meal_reservSC_A&quot;               &quot;meal_reservSC_D&quot;              
## [441] &quot;meal_reservSC_F&quot;               &quot;meal_reservSC_G&quot;              
## [443] &quot;meal_reservSC_P&quot;               &quot;meal_reservUndefined_D&quot;       
## [445] &quot;country_monthAGO_December&quot;     &quot;country_monthAGO_February&quot;    
## [447] &quot;country_monthAND_January&quot;      &quot;country_monthARE_January&quot;     
## [449] &quot;country_monthAUS_April&quot;        &quot;country_monthAUS_February&quot;    
## [451] &quot;country_monthAUS_January&quot;      &quot;country_monthAUT_July&quot;        
## [453] &quot;country_monthAUT_March&quot;        &quot;country_monthAUT_October&quot;     
## [455] &quot;country_monthBEL_August&quot;       &quot;country_monthBEL_July&quot;        
## [457] &quot;country_monthBEL_October&quot;      &quot;country_monthBGR_May&quot;         
## [459] &quot;country_monthBLR_January&quot;      &quot;country_monthBRA_April&quot;       
## [461] &quot;country_monthCHE_July&quot;         &quot;country_monthCHE_March&quot;       
## [463] &quot;country_monthCHL_April&quot;        &quot;country_monthCHL_December&quot;    
## [465] &quot;country_monthCHN_July&quot;         &quot;country_monthCHN_October&quot;     
## [467] &quot;country_monthCOL_November&quot;     &quot;country_monthCOL_September&quot;   
## [469] &quot;country_monthCYP_August&quot;       &quot;country_monthCYP_May&quot;         
## [471] &quot;country_monthCZE_August&quot;       &quot;country_monthCZE_July&quot;        
## [473] &quot;country_monthCZE_October&quot;      &quot;country_monthDEU_April&quot;       
## [475] &quot;country_monthDEU_December&quot;     &quot;country_monthDEU_October&quot;     
## [477] &quot;country_monthEGY_February&quot;     &quot;country_monthEGY_March&quot;       
## [479] &quot;country_monthEGY_November&quot;     &quot;country_monthESP_April&quot;       
## [481] &quot;country_monthESP_December&quot;     &quot;country_monthESP_July&quot;        
## [483] &quot;country_monthESP_June&quot;         &quot;country_monthFRA_April&quot;       
## [485] &quot;country_monthFRA_January&quot;      &quot;country_monthFRA_June&quot;        
## [487] &quot;country_monthFRA_March&quot;        &quot;country_monthFRA_May&quot;         
## [489] &quot;country_monthFRA_November&quot;     &quot;country_monthFRA_September&quot;   
## [491] &quot;country_monthGAB_September&quot;    &quot;country_monthGBR_June&quot;        
## [493] &quot;country_monthGBR_May&quot;          &quot;country_monthGBR_November&quot;    
## [495] &quot;country_monthGBR_October&quot;      &quot;country_monthGEO_March&quot;       
## [497] &quot;country_monthGIB_August&quot;       &quot;country_monthGIB_March&quot;       
## [499] &quot;country_monthHND_February&quot;     &quot;country_monthHRV_March&quot;       
## [501] &quot;country_monthHUN_August&quot;       &quot;country_monthHUN_November&quot;    
## [503] &quot;country_monthIRL_July&quot;         &quot;country_monthIRL_June&quot;        
## [505] &quot;country_monthIRL_May&quot;          &quot;country_monthIRL_October&quot;     
## [507] &quot;country_monthIRN_February&quot;     &quot;country_monthIRN_March&quot;       
## [509] &quot;country_monthIRN_October&quot;      &quot;country_monthISR_July&quot;        
## [511] &quot;country_monthITA_April&quot;        &quot;country_monthITA_July&quot;        
## [513] &quot;country_monthJPN_December&quot;     &quot;country_monthKAZ_January&quot;     
## [515] &quot;country_monthKAZ_July&quot;         &quot;country_monthKEN_March&quot;       
## [517] &quot;country_monthKOR_June&quot;         &quot;country_monthKWT_December&quot;    
## [519] &quot;country_monthLBN_August&quot;       &quot;country_monthLUX_December&quot;    
## [521] &quot;country_monthLUX_February&quot;     &quot;country_monthLUX_November&quot;    
## [523] &quot;country_monthLUX_October&quot;      &quot;country_monthMAR_August&quot;      
## [525] &quot;country_monthMAR_December&quot;     &quot;country_monthMAR_February&quot;    
## [527] &quot;country_monthMDV_November&quot;     &quot;country_monthMLT_August&quot;      
## [529] &quot;country_monthMOZ_June&quot;         &quot;country_monthMYS_December&quot;    
## [531] &quot;country_monthNGA_March&quot;        &quot;country_monthNLD_February&quot;    
## [533] &quot;country_monthNOR_July&quot;         &quot;country_monthOMN_January&quot;     
## [535] &quot;country_monthPER_March&quot;        &quot;country_monthPER_November&quot;    
## [537] &quot;country_monthPRT_August&quot;       &quot;country_monthPRT_January&quot;     
## [539] &quot;country_monthPRT_May&quot;          &quot;country_monthPRT_November&quot;    
## [541] &quot;country_monthPRT_October&quot;      &quot;country_monthPRT_September&quot;   
## [543] &quot;country_monthQAT_April&quot;        &quot;country_monthQAT_June&quot;        
## [545] &quot;country_monthROU_February&quot;     &quot;country_monthRUS_March&quot;       
## [547] &quot;country_monthSAU_February&quot;     &quot;country_monthSGP_January&quot;     
## [549] &quot;country_monthSVK_August&quot;       &quot;country_monthSVN_March&quot;       
## [551] &quot;country_monthSWE_December&quot;     &quot;country_monthSWE_February&quot;    
## [553] &quot;country_monthSWE_March&quot;        &quot;country_monthSWE_September&quot;   
## [555] &quot;country_monthTHA_February&quot;     &quot;country_monthTHA_October&quot;     
## [557] &quot;country_monthTJK_May&quot;          &quot;country_monthTMP_December&quot;    
## [559] &quot;country_monthTUN_March&quot;        &quot;country_monthTUR_February&quot;    
## [561] &quot;country_monthTUR_January&quot;      &quot;country_monthTUR_July&quot;        
## [563] &quot;country_monthTZA_September&quot;    &quot;country_monthVEN_January&quot;     
## [565] &quot;country_monthVEN_September&quot;    &quot;country_monthZAF_October&quot;     
## [567] &quot;country_monthZMB_April&quot;</code></pre>
</div>
<div id="log-loss-test-oos" class="section level3" number="4.1.4">
<h3><span class="header-section-number">4.1.4</span> LOG LOSS test OOS</h3>
<p>Ahora pruebo el error log loss del lasso</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="modeling.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Predicciones</span></span>
<span id="cb16-2"><a href="modeling.html#cb16-2" aria-hidden="true" tabindex="-1"></a>lasso_score <span class="ot">&lt;-</span> <span class="fu">predict</span>(cvlasso_a,</span>
<span id="cb16-3"><a href="modeling.html#cb16-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">newdata =</span> Xb,</span>
<span id="cb16-4"><a href="modeling.html#cb16-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">type=</span><span class="st">&quot;response&quot;</span>,</span>
<span id="cb16-5"><a href="modeling.html#cb16-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">select =</span> <span class="st">&quot;min&quot;</span> )</span>
<span id="cb16-6"><a href="modeling.html#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="modeling.html#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="modeling.html#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co">#dataframe</span></span>
<span id="cb16-9"><a href="modeling.html#cb16-9" aria-hidden="true" tabindex="-1"></a>lasso_validation <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(y, lasso_score)</span>
<span id="cb16-10"><a href="modeling.html#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(lasso_validation)[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;lasso_score&#39;</span>)</span>
<span id="cb16-11"><a href="modeling.html#cb16-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-12"><a href="modeling.html#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(MLmetrics)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;MLmetrics&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:base&#39;:
## 
##     Recall</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="modeling.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">LogLoss</span>(lasso_validation<span class="sc">$</span>lasso_score,lasso_validation<span class="sc">$</span>y)</span></code></pre></div>
<pre><code>## [1] 0.307977</code></pre>
<p>Nos dio un error sorprendetemente muy pequeño. Con este modelo logramos realizar un error de 0.41872 y 0.42131 en los datos de test de Kaggle.</p>
</div>
</div>
<div id="xgboosting" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> XGBOOSTING</h2>
<p>Sin embargo, para ganar el concurso optamos por explorar otros modelos que generalmente tienen mayor potencial de ganar este tipo de concursos: XG boosting.</p>
<p>En este caso, se eligieron los hiperparametros mediante un tuning manual explorando el comportamiento del error cuando se fijaban todos los hp excepto uno. De esta manera se fijo la profunidad máxima del arbol en 6 y el learning rate en .06.</p>
<p>Debido a la alta cantidad de variables de las bases de datos (y pues que muchas son poco informativas) el colsample por cada arbol generado es alto: del 70%. De haber tenido solo variables muy informativas pues bajariamos ese porcentaje, sin embargo quicimos explitar la capacidad del modelo de seleccionar por si solo las variables.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="modeling.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Preparar la base de entrenamiento</span></span>
<span id="cb21-2"><a href="modeling.html#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(xgboost)</span></code></pre></div>
<pre><code>## Warning: package &#39;xgboost&#39; was built under R version 4.1.2</code></pre>
<pre><code>## 
## Attaching package: &#39;xgboost&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:plotly&#39;:
## 
##     slice</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     slice</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="modeling.html#cb26-1" aria-hidden="true" tabindex="-1"></a>dtrain <span class="ot">&lt;-</span> <span class="fu">xgb.DMatrix</span>(Xa, <span class="at">label =</span> Ya) </span>
<span id="cb26-2"><a href="modeling.html#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Label es el target</span></span>
<span id="cb26-3"><a href="modeling.html#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Preparar la base de validación</span></span>
<span id="cb26-4"><a href="modeling.html#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="modeling.html#cb26-5" aria-hidden="true" tabindex="-1"></a>dtest <span class="ot">&lt;-</span> <span class="fu">xgb.DMatrix</span>(Xb, <span class="at">label =</span> y)</span>
<span id="cb26-6"><a href="modeling.html#cb26-6" aria-hidden="true" tabindex="-1"></a>watchlist <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">train =</span> dtrain, <span class="at">eval =</span> dtest) </span>
<span id="cb26-7"><a href="modeling.html#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Para evaluar el performance del modelo</span></span>
<span id="cb26-8"><a href="modeling.html#cb26-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-9"><a href="modeling.html#cb26-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-10"><a href="modeling.html#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Entrenamiento del modelo</span></span>
<span id="cb26-11"><a href="modeling.html#cb26-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-12"><a href="modeling.html#cb26-12" aria-hidden="true" tabindex="-1"></a>param <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">max_depth =</span> <span class="dv">6</span>, <span class="at">learning_rate =</span> <span class="fl">0.06</span>, </span>
<span id="cb26-13"><a href="modeling.html#cb26-13" aria-hidden="true" tabindex="-1"></a>              <span class="at">objective =</span> <span class="st">&quot;binary:logistic&quot;</span>,</span>
<span id="cb26-14"><a href="modeling.html#cb26-14" aria-hidden="true" tabindex="-1"></a>              <span class="at">eval_metric =</span> <span class="st">&quot;logloss&quot;</span>, <span class="at">subsample =</span> <span class="fl">0.6</span>, <span class="at">colsample_bytree =</span> <span class="fl">0.7</span>)</span>
<span id="cb26-15"><a href="modeling.html#cb26-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-16"><a href="modeling.html#cb26-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-17"><a href="modeling.html#cb26-17" aria-hidden="true" tabindex="-1"></a>xgb_model <span class="ot">&lt;-</span> <span class="fu">xgb.train</span>(<span class="at">params =</span> param, dtrain, </span>
<span id="cb26-18"><a href="modeling.html#cb26-18" aria-hidden="true" tabindex="-1"></a>                       <span class="at">early_stopping_rounds =</span>  <span class="dv">10</span>, </span>
<span id="cb26-19"><a href="modeling.html#cb26-19" aria-hidden="true" tabindex="-1"></a>                       <span class="at">nrounds =</span> <span class="dv">300</span>,</span>
<span id="cb26-20"><a href="modeling.html#cb26-20" aria-hidden="true" tabindex="-1"></a>                 watchlist)</span></code></pre></div>
<pre><code>## [1]  train-logloss:0.663222  eval-logloss:0.662965 
## Multiple eval metrics are present. Will use eval_logloss for early stopping.
## Will train until eval_logloss hasn&#39;t improved in 10 rounds.
## 
## [2]  train-logloss:0.634519  eval-logloss:0.634210 
## [3]  train-logloss:0.609105  eval-logloss:0.608792 
## [4]  train-logloss:0.585925  eval-logloss:0.585632 
## [5]  train-logloss:0.566846  eval-logloss:0.566520 
## [6]  train-logloss:0.547866  eval-logloss:0.547613 
## [7]  train-logloss:0.531196  eval-logloss:0.530953 
## [8]  train-logloss:0.514483  eval-logloss:0.514309 
## [9]  train-logloss:0.500674  eval-logloss:0.500550 
## [10] train-logloss:0.488633  eval-logloss:0.488497 
## [11] train-logloss:0.479041  eval-logloss:0.478889 
## [12] train-logloss:0.466199  eval-logloss:0.466273 
## [13] train-logloss:0.455235  eval-logloss:0.455273 
## [14] train-logloss:0.444384  eval-logloss:0.444325 
## [15] train-logloss:0.434323  eval-logloss:0.434283 
## [16] train-logloss:0.425645  eval-logloss:0.425530 
## [17] train-logloss:0.417293  eval-logloss:0.417227 
## [18] train-logloss:0.410248  eval-logloss:0.410186 
## [19] train-logloss:0.402595  eval-logloss:0.402522 
## [20] train-logloss:0.395693  eval-logloss:0.395637 
## [21] train-logloss:0.389155  eval-logloss:0.389095 
## [22] train-logloss:0.383109  eval-logloss:0.383009 
## [23] train-logloss:0.377561  eval-logloss:0.377454 
## [24] train-logloss:0.372889  eval-logloss:0.372789 
## [25] train-logloss:0.368388  eval-logloss:0.368239 
## [26] train-logloss:0.364201  eval-logloss:0.364095 
## [27] train-logloss:0.360773  eval-logloss:0.360646 
## [28] train-logloss:0.357228  eval-logloss:0.357109 
## [29] train-logloss:0.353985  eval-logloss:0.353856 
## [30] train-logloss:0.350971  eval-logloss:0.350842 
## [31] train-logloss:0.348278  eval-logloss:0.348216 
## [32] train-logloss:0.344813  eval-logloss:0.344815 
## [33] train-logloss:0.342739  eval-logloss:0.342785 
## [34] train-logloss:0.340321  eval-logloss:0.340383 
## [35] train-logloss:0.337858  eval-logloss:0.337944 
## [36] train-logloss:0.335790  eval-logloss:0.335880 
## [37] train-logloss:0.333549  eval-logloss:0.333720 
## [38] train-logloss:0.331315  eval-logloss:0.331577 
## [39] train-logloss:0.328867  eval-logloss:0.329153 
## [40] train-logloss:0.326044  eval-logloss:0.326437 
## [41] train-logloss:0.323937  eval-logloss:0.324386 
## [42] train-logloss:0.322231  eval-logloss:0.322730 
## [43] train-logloss:0.320210  eval-logloss:0.320683 
## [44] train-logloss:0.317851  eval-logloss:0.318520 
## [45] train-logloss:0.316094  eval-logloss:0.316837 
## [46] train-logloss:0.314676  eval-logloss:0.315437 
## [47] train-logloss:0.313541  eval-logloss:0.314292 
## [48] train-logloss:0.312309  eval-logloss:0.313026 
## [49] train-logloss:0.310844  eval-logloss:0.311632 
## [50] train-logloss:0.308857  eval-logloss:0.309670 
## [51] train-logloss:0.307746  eval-logloss:0.308592 
## [52] train-logloss:0.306746  eval-logloss:0.307586 
## [53] train-logloss:0.305816  eval-logloss:0.306667 
## [54] train-logloss:0.304803  eval-logloss:0.305653 
## [55] train-logloss:0.303540  eval-logloss:0.304482 
## [56] train-logloss:0.302516  eval-logloss:0.303542 
## [57] train-logloss:0.301271  eval-logloss:0.302368 
## [58] train-logloss:0.300415  eval-logloss:0.301540 
## [59] train-logloss:0.298242  eval-logloss:0.299466 
## [60] train-logloss:0.297357  eval-logloss:0.298655 
## [61] train-logloss:0.295451  eval-logloss:0.296791 
## [62] train-logloss:0.294890  eval-logloss:0.296236 
## [63] train-logloss:0.294277  eval-logloss:0.295646 
## [64] train-logloss:0.293508  eval-logloss:0.294877 
## [65] train-logloss:0.291941  eval-logloss:0.293413 
## [66] train-logloss:0.290419  eval-logloss:0.291974 
## [67] train-logloss:0.289630  eval-logloss:0.291245 
## [68] train-logloss:0.289161  eval-logloss:0.290767 
## [69] train-logloss:0.288363  eval-logloss:0.289978 
## [70] train-logloss:0.287609  eval-logloss:0.289273 
## [71] train-logloss:0.287048  eval-logloss:0.288743 
## [72] train-logloss:0.286103  eval-logloss:0.287872 
## [73] train-logloss:0.284976  eval-logloss:0.286776 
## [74] train-logloss:0.284490  eval-logloss:0.286322 
## [75] train-logloss:0.284074  eval-logloss:0.285973 
## [76] train-logloss:0.283231  eval-logloss:0.285190 
## [77] train-logloss:0.282669  eval-logloss:0.284668 
## [78] train-logloss:0.281071  eval-logloss:0.283244 
## [79] train-logloss:0.280655  eval-logloss:0.282900 
## [80] train-logloss:0.279644  eval-logloss:0.281914 
## [81] train-logloss:0.279367  eval-logloss:0.281691 
## [82] train-logloss:0.279010  eval-logloss:0.281362 
## [83] train-logloss:0.278649  eval-logloss:0.281034 
## [84] train-logloss:0.278323  eval-logloss:0.280733 
## [85] train-logloss:0.278069  eval-logloss:0.280463 
## [86] train-logloss:0.276995  eval-logloss:0.279558 
## [87] train-logloss:0.276606  eval-logloss:0.279208 
## [88] train-logloss:0.276111  eval-logloss:0.278831 
## [89] train-logloss:0.275657  eval-logloss:0.278398 
## [90] train-logloss:0.275263  eval-logloss:0.278062 
## [91] train-logloss:0.274939  eval-logloss:0.277815 
## [92] train-logloss:0.274422  eval-logloss:0.277325 
## [93] train-logloss:0.273725  eval-logloss:0.276732 
## [94] train-logloss:0.273171  eval-logloss:0.276249 
## [95] train-logloss:0.272901  eval-logloss:0.276002 
## [96] train-logloss:0.272569  eval-logloss:0.275700 
## [97] train-logloss:0.272104  eval-logloss:0.275275 
## [98] train-logloss:0.271863  eval-logloss:0.275099 
## [99] train-logloss:0.271468  eval-logloss:0.274776 
## [100]    train-logloss:0.271201  eval-logloss:0.274554 
## [101]    train-logloss:0.270736  eval-logloss:0.274146 
## [102]    train-logloss:0.270378  eval-logloss:0.273832 
## [103]    train-logloss:0.270141  eval-logloss:0.273646 
## [104]    train-logloss:0.269385  eval-logloss:0.273042 
## [105]    train-logloss:0.269155  eval-logloss:0.272826 
## [106]    train-logloss:0.268807  eval-logloss:0.272559 
## [107]    train-logloss:0.268504  eval-logloss:0.272288 
## [108]    train-logloss:0.268036  eval-logloss:0.271872 
## [109]    train-logloss:0.267784  eval-logloss:0.271637 
## [110]    train-logloss:0.267582  eval-logloss:0.271513 
## [111]    train-logloss:0.267223  eval-logloss:0.271168 
## [112]    train-logloss:0.266754  eval-logloss:0.270810 
## [113]    train-logloss:0.265659  eval-logloss:0.269888 
## [114]    train-logloss:0.265202  eval-logloss:0.269495 
## [115]    train-logloss:0.264880  eval-logloss:0.269336 
## [116]    train-logloss:0.263929  eval-logloss:0.268461 
## [117]    train-logloss:0.263376  eval-logloss:0.267949 
## [118]    train-logloss:0.263250  eval-logloss:0.267829 
## [119]    train-logloss:0.262907  eval-logloss:0.267577 
## [120]    train-logloss:0.262734  eval-logloss:0.267405 
## [121]    train-logloss:0.262587  eval-logloss:0.267291 
## [122]    train-logloss:0.262081  eval-logloss:0.266832 
## [123]    train-logloss:0.261948  eval-logloss:0.266754 
## [124]    train-logloss:0.261383  eval-logloss:0.266325 
## [125]    train-logloss:0.261174  eval-logloss:0.266142 
## [126]    train-logloss:0.261013  eval-logloss:0.266026 
## [127]    train-logloss:0.260847  eval-logloss:0.265866 
## [128]    train-logloss:0.260674  eval-logloss:0.265741 
## [129]    train-logloss:0.260310  eval-logloss:0.265411 
## [130]    train-logloss:0.260167  eval-logloss:0.265288 
## [131]    train-logloss:0.259570  eval-logloss:0.264835 
## [132]    train-logloss:0.258900  eval-logloss:0.264244 
## [133]    train-logloss:0.258648  eval-logloss:0.264080 
## [134]    train-logloss:0.258419  eval-logloss:0.263875 
## [135]    train-logloss:0.258258  eval-logloss:0.263755 
## [136]    train-logloss:0.257913  eval-logloss:0.263464 
## [137]    train-logloss:0.257753  eval-logloss:0.263378 
## [138]    train-logloss:0.257609  eval-logloss:0.263227 
## [139]    train-logloss:0.257371  eval-logloss:0.263024 
## [140]    train-logloss:0.257222  eval-logloss:0.262941 
## [141]    train-logloss:0.256982  eval-logloss:0.262763 
## [142]    train-logloss:0.256702  eval-logloss:0.262522 
## [143]    train-logloss:0.256548  eval-logloss:0.262415 
## [144]    train-logloss:0.256218  eval-logloss:0.262162 
## [145]    train-logloss:0.255991  eval-logloss:0.262003 
## [146]    train-logloss:0.255836  eval-logloss:0.261923 
## [147]    train-logloss:0.255702  eval-logloss:0.261854 
## [148]    train-logloss:0.255568  eval-logloss:0.261730 
## [149]    train-logloss:0.255427  eval-logloss:0.261632 
## [150]    train-logloss:0.255240  eval-logloss:0.261564 
## [151]    train-logloss:0.255007  eval-logloss:0.261414 
## [152]    train-logloss:0.254807  eval-logloss:0.261299 
## [153]    train-logloss:0.254369  eval-logloss:0.260990 
## [154]    train-logloss:0.254229  eval-logloss:0.260896 
## [155]    train-logloss:0.254123  eval-logloss:0.260816 
## [156]    train-logloss:0.253849  eval-logloss:0.260645 
## [157]    train-logloss:0.253522  eval-logloss:0.260359 
## [158]    train-logloss:0.253416  eval-logloss:0.260259 
## [159]    train-logloss:0.253255  eval-logloss:0.260145 
## [160]    train-logloss:0.253131  eval-logloss:0.260043 
## [161]    train-logloss:0.253009  eval-logloss:0.259956 
## [162]    train-logloss:0.252886  eval-logloss:0.259892 
## [163]    train-logloss:0.252698  eval-logloss:0.259786 
## [164]    train-logloss:0.252546  eval-logloss:0.259666 
## [165]    train-logloss:0.252319  eval-logloss:0.259546 
## [166]    train-logloss:0.252187  eval-logloss:0.259466 
## [167]    train-logloss:0.252069  eval-logloss:0.259399 
## [168]    train-logloss:0.251327  eval-logloss:0.258765 
## [169]    train-logloss:0.251237  eval-logloss:0.258689 
## [170]    train-logloss:0.251162  eval-logloss:0.258648 
## [171]    train-logloss:0.250991  eval-logloss:0.258525 
## [172]    train-logloss:0.250804  eval-logloss:0.258382 
## [173]    train-logloss:0.250668  eval-logloss:0.258288 
## [174]    train-logloss:0.250386  eval-logloss:0.257996 
## [175]    train-logloss:0.250283  eval-logloss:0.257935 
## [176]    train-logloss:0.250172  eval-logloss:0.257861 
## [177]    train-logloss:0.250042  eval-logloss:0.257808 
## [178]    train-logloss:0.249833  eval-logloss:0.257620 
## [179]    train-logloss:0.249700  eval-logloss:0.257530 
## [180]    train-logloss:0.249567  eval-logloss:0.257509 
## [181]    train-logloss:0.249463  eval-logloss:0.257460 
## [182]    train-logloss:0.249361  eval-logloss:0.257378 
## [183]    train-logloss:0.249179  eval-logloss:0.257271 
## [184]    train-logloss:0.249083  eval-logloss:0.257201 
## [185]    train-logloss:0.248957  eval-logloss:0.257123 
## [186]    train-logloss:0.248771  eval-logloss:0.257028 
## [187]    train-logloss:0.248655  eval-logloss:0.256988 
## [188]    train-logloss:0.248396  eval-logloss:0.256756 
## [189]    train-logloss:0.248247  eval-logloss:0.256700 
## [190]    train-logloss:0.248175  eval-logloss:0.256695 
## [191]    train-logloss:0.248073  eval-logloss:0.256616 
## [192]    train-logloss:0.247965  eval-logloss:0.256548 
## [193]    train-logloss:0.247839  eval-logloss:0.256465 
## [194]    train-logloss:0.247612  eval-logloss:0.256296 
## [195]    train-logloss:0.247522  eval-logloss:0.256242 
## [196]    train-logloss:0.247448  eval-logloss:0.256199 
## [197]    train-logloss:0.247193  eval-logloss:0.255968 
## [198]    train-logloss:0.247062  eval-logloss:0.255877 
## [199]    train-logloss:0.246904  eval-logloss:0.255823 
## [200]    train-logloss:0.246775  eval-logloss:0.255723 
## [201]    train-logloss:0.246563  eval-logloss:0.255599 
## [202]    train-logloss:0.246364  eval-logloss:0.255498 
## [203]    train-logloss:0.246249  eval-logloss:0.255479 
## [204]    train-logloss:0.245498  eval-logloss:0.254797 
## [205]    train-logloss:0.245399  eval-logloss:0.254740 
## [206]    train-logloss:0.245328  eval-logloss:0.254704 
## [207]    train-logloss:0.245207  eval-logloss:0.254586 
## [208]    train-logloss:0.245106  eval-logloss:0.254506 
## [209]    train-logloss:0.245025  eval-logloss:0.254451 
## [210]    train-logloss:0.244919  eval-logloss:0.254374 
## [211]    train-logloss:0.244858  eval-logloss:0.254332 
## [212]    train-logloss:0.244543  eval-logloss:0.254083 
## [213]    train-logloss:0.244297  eval-logloss:0.253880 
## [214]    train-logloss:0.244149  eval-logloss:0.253764 
## [215]    train-logloss:0.244068  eval-logloss:0.253737 
## [216]    train-logloss:0.243980  eval-logloss:0.253655 
## [217]    train-logloss:0.243871  eval-logloss:0.253604 
## [218]    train-logloss:0.243725  eval-logloss:0.253508 
## [219]    train-logloss:0.243501  eval-logloss:0.253382 
## [220]    train-logloss:0.243409  eval-logloss:0.253283 
## [221]    train-logloss:0.243292  eval-logloss:0.253190 
## [222]    train-logloss:0.243207  eval-logloss:0.253117 
## [223]    train-logloss:0.243135  eval-logloss:0.253056 
## [224]    train-logloss:0.242859  eval-logloss:0.252884 
## [225]    train-logloss:0.242725  eval-logloss:0.252752 
## [226]    train-logloss:0.242648  eval-logloss:0.252732 
## [227]    train-logloss:0.242443  eval-logloss:0.252562 
## [228]    train-logloss:0.242372  eval-logloss:0.252536 
## [229]    train-logloss:0.242296  eval-logloss:0.252478 
## [230]    train-logloss:0.242179  eval-logloss:0.252390 
## [231]    train-logloss:0.242088  eval-logloss:0.252274 
## [232]    train-logloss:0.241883  eval-logloss:0.252141 
## [233]    train-logloss:0.241801  eval-logloss:0.252104 
## [234]    train-logloss:0.241717  eval-logloss:0.252067 
## [235]    train-logloss:0.241645  eval-logloss:0.252013 
## [236]    train-logloss:0.241537  eval-logloss:0.251924 
## [237]    train-logloss:0.241460  eval-logloss:0.251891 
## [238]    train-logloss:0.241360  eval-logloss:0.251865 
## [239]    train-logloss:0.241252  eval-logloss:0.251837 
## [240]    train-logloss:0.241183  eval-logloss:0.251800 
## [241]    train-logloss:0.241077  eval-logloss:0.251739 
## [242]    train-logloss:0.240986  eval-logloss:0.251660 
## [243]    train-logloss:0.240920  eval-logloss:0.251608 
## [244]    train-logloss:0.240817  eval-logloss:0.251555 
## [245]    train-logloss:0.240740  eval-logloss:0.251512 
## [246]    train-logloss:0.240578  eval-logloss:0.251413 
## [247]    train-logloss:0.240356  eval-logloss:0.251249 
## [248]    train-logloss:0.240265  eval-logloss:0.251222 
## [249]    train-logloss:0.240195  eval-logloss:0.251218 
## [250]    train-logloss:0.240089  eval-logloss:0.251162 
## [251]    train-logloss:0.239816  eval-logloss:0.250950 
## [252]    train-logloss:0.239736  eval-logloss:0.250933 
## [253]    train-logloss:0.239674  eval-logloss:0.250915 
## [254]    train-logloss:0.239522  eval-logloss:0.250830 
## [255]    train-logloss:0.239421  eval-logloss:0.250732 
## [256]    train-logloss:0.239336  eval-logloss:0.250682 
## [257]    train-logloss:0.239117  eval-logloss:0.250541 
## [258]    train-logloss:0.238919  eval-logloss:0.250460 
## [259]    train-logloss:0.238814  eval-logloss:0.250370 
## [260]    train-logloss:0.238725  eval-logloss:0.250334 
## [261]    train-logloss:0.238647  eval-logloss:0.250306 
## [262]    train-logloss:0.238605  eval-logloss:0.250284 
## [263]    train-logloss:0.238545  eval-logloss:0.250251 
## [264]    train-logloss:0.238476  eval-logloss:0.250208 
## [265]    train-logloss:0.238354  eval-logloss:0.250147 
## [266]    train-logloss:0.238243  eval-logloss:0.250077 
## [267]    train-logloss:0.238178  eval-logloss:0.250045 
## [268]    train-logloss:0.238133  eval-logloss:0.250027 
## [269]    train-logloss:0.238035  eval-logloss:0.249985 
## [270]    train-logloss:0.237967  eval-logloss:0.249962 
## [271]    train-logloss:0.237864  eval-logloss:0.249918 
## [272]    train-logloss:0.237788  eval-logloss:0.249843 
## [273]    train-logloss:0.237731  eval-logloss:0.249802 
## [274]    train-logloss:0.237647  eval-logloss:0.249784 
## [275]    train-logloss:0.237488  eval-logloss:0.249658 
## [276]    train-logloss:0.237411  eval-logloss:0.249615 
## [277]    train-logloss:0.237348  eval-logloss:0.249561 
## [278]    train-logloss:0.237254  eval-logloss:0.249520 
## [279]    train-logloss:0.237140  eval-logloss:0.249429 
## [280]    train-logloss:0.237049  eval-logloss:0.249430 
## [281]    train-logloss:0.236929  eval-logloss:0.249348 
## [282]    train-logloss:0.236850  eval-logloss:0.249306 
## [283]    train-logloss:0.236764  eval-logloss:0.249227 
## [284]    train-logloss:0.236687  eval-logloss:0.249184 
## [285]    train-logloss:0.236589  eval-logloss:0.249112 
## [286]    train-logloss:0.236485  eval-logloss:0.249100 
## [287]    train-logloss:0.236335  eval-logloss:0.248956 
## [288]    train-logloss:0.236227  eval-logloss:0.248878 
## [289]    train-logloss:0.236160  eval-logloss:0.248851 
## [290]    train-logloss:0.236019  eval-logloss:0.248777 
## [291]    train-logloss:0.235950  eval-logloss:0.248768 
## [292]    train-logloss:0.235821  eval-logloss:0.248704 
## [293]    train-logloss:0.235640  eval-logloss:0.248588 
## [294]    train-logloss:0.235597  eval-logloss:0.248543 
## [295]    train-logloss:0.235491  eval-logloss:0.248484 
## [296]    train-logloss:0.235406  eval-logloss:0.248439 
## [297]    train-logloss:0.235354  eval-logloss:0.248436 
## [298]    train-logloss:0.235296  eval-logloss:0.248397 
## [299]    train-logloss:0.235242  eval-logloss:0.248376 
## [300]    train-logloss:0.235119  eval-logloss:0.248325</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="modeling.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Predicción</span></span>
<span id="cb28-2"><a href="modeling.html#cb28-2" aria-hidden="true" tabindex="-1"></a>xgb_pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(xgb_model, Xb)</span>
<span id="cb28-3"><a href="modeling.html#cb28-3" aria-hidden="true" tabindex="-1"></a>XGpred<span class="ot">&lt;-</span><span class="fu">data.frame</span>(y, xgb_pred)</span>
<span id="cb28-4"><a href="modeling.html#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(XGpred)<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;y&quot;</span>,<span class="st">&quot;xgb_pred&quot;</span>)</span></code></pre></div>
<p>Se muestran las evaluaciones del modelo, tanto in sample como out of sample, para las primeras y últimas iteraciones.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="modeling.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">LogLoss</span>(XGpred<span class="sc">$</span>xgb_pred,XGpred<span class="sc">$</span>y)</span></code></pre></div>
<pre><code>## [1] 0.2483252</code></pre>
<p>Este modelo logró ganar el concurso con un error en los datasets de kaggle de 0.37598 y 0.37401.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="preparación-de-los-datos.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="conclusiones.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["final_bookdown.pdf", "final_bookdown.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
